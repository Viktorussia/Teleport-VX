#!/bin/ash
BASE="$(CDPATH= cd -- "$(dirname "$0")/.." && pwd)"
SYS="$BASE/core/system.sh"

case "$1" in
  status)   sh "$SYS" status ;;
  version)  sh "$SYS" version ;;
  doctor)   sh "$BASE/tools/doctor.sh" 2>/dev/null || echo "doctor not installed" ;;
  update)   (cd "$BASE" && git pull --rebase) ;;
  sync)     (cd "$BASE" && git add . && git commit -m "AutoSync: $(date +%Y-%m-%d_%H:%M:%S)" && git push) ;;
  *) echo "vx {status|version|doctor|update|sync}"; exit 1 ;;
esac
